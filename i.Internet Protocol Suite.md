# 层级
1. "物理层"（Physical Layer）
光缆、电缆、双绞线、无线电波等。它就是把电脑连接起来的物理手段。它主要规定了网络的一些电气特性，作用是负责传送0和1的电信号。

2. "链接层"（Link Layer）
确定了0和1的分组方式。
- "以太网"（Ethernet）协议，一组电信号构成一个数据包，叫做"帧"（Frame）。每一帧分成两个部分：标头（Head）和数据（Data）。
- 连入网络的所有设备，都必须具有"网卡"接口。网卡的地址叫做MAC地址。
- 以太网把数据包向本网络内所有计算机发送，让每台计算机自己判断，是否为接收方。

3. "网络层"（Network Layer）
"网络层"的作用是引进一套新的地址，使得我们能够区分不同的计算机是否属于同一个子网络。这套地址就叫做"网络地址"，简称"网址"。它能够区分哪些MAC地址属于同一个子网络，哪些不是。如果是同一个子网络，就采用广播方式发送，否则就采用"路由"方式发送。
- 每台计算机有了两种地址，一种是MAC地址，另一种是网络地址。两种地址之间没有任何联系，MAC地址是绑定在网卡上的，网络地址则是管理员分配的，它们只是随机组合在一起。
### IP协议：
规定网络地址的协议，叫做IP协议。它所定义的地址，就被称为IP地址。广泛采用的是IP协议第四版，简称IPv4。这个版本规定，网络地址由32个二进制位组成。我们用分成四段的十进制数表示IP地址，从0.0.0.0一直到255.255.255.255。
  - IP协议的作用主要有两个，一个是为每一台计算机分配IP地址，另一个是确定哪些地址在同一个子网络。
  - 网络地址前一部分代表网络，后一部分代表主机。（两个的具体位数通过子网掩码判断）处于同一个子网络的电脑，它们IP地址的网络部分必定是相同的
  - "子网掩码"（subnet mask）。表示子网络特征的一个参数。它在形式上等同于IP地址，也是一个32位二进制数字，它的网络部分全部为1，主机部分全部为0。比如，IP地址172.16.254.1，如果已知网络部分是前24位，主机部分是后8位，那么子网络掩码就是11111111.11111111.11111111.00000000，写成十进制就是255.255.255.0。
  - IP数据包 我们可以把IP数据包直接放进以太网数据包的"数据"部分，因此完全不用修改以太网的规格。这就是互联网分层结构的好处：上层的变动完全不涉及下层的结构。
### ARP协议
我们需要一种机制，能够从IP地址得到MAC地址。
- 如果两台主机不在同一个子网络，那么事实上没有办法得到对方的MAC地址，只能把数据包传送到两个子网络连接处的"网关"（gateway），(用ARP得到网关MAC)让网关去处理。
- 如果两台主机在同一个子网络，那么我们可以用ARP协议，得到对方的MAC地址。
4. "传输层"（Transport Layer）
需要一个参数，表示这个数据包到底供哪个程序（进程）使用。这个参数就叫做"端口"（port）
- "端口"是0到65535之间的一个整数，正好16个二进制位。0到1023的端口被系统占用，用户只能选用大于1023的端口。
- "传输层"的功能，就是建立"端口到端口"的通信。相比之下，"网络层"的功能是建立"主机到主机"的通信。只要确定主机和端口，我们就能实现程序之间的交流。
- Unix系统就把主机+端口，叫做"套接字"（socket）
### UDP协议
在数据包中加入端口信息，这就需要新的协议。最简单的实现叫做UDP协议，它的格式几乎就是在数据前面，加上端口号。
- 优点是比较简单，容易实现，但是缺点是可靠性较差，一旦数据包发出，无法知道对方是否收到。
### TCP协议
TCP可以认为是有确认机制的UDP协议，每发出一个数据包都要求确认。如果有一个数据包遗失，就收不到确认。
- TCP协议能够确保数据不会遗失。它的缺点是过程复杂、实现困难、消耗较多的资源。
5. "应用层"（Application Layer）
"应用层"的作用，就是规定应用程序的数据格式。  
举例来说，TCP协议可以为各种各样的程序传递数据，比如Email、WWW、FTP等等。那么，必须有不同协议规定电子邮件、网页、FTP数据的格式，这些应用程序协议就构成了"应用层"。

```
以太网数据包{
  标头 && IP数据包{
    标头 && TCP数据包{
       标头 && 应用层数据
    }
  }
}
```
# 数据包发送过程
### 发送数据所需信息
- 同一个子网络 -->	对方的MAC地址，对方的IP地址
- 非同一个子网络	--> 网关的MAC地址，对方的IP地址
### 静态IP地址
上网所需信息：
   * 本机的IP地址
　　* 子网掩码
　　* 网关的IP地址
　　* DNS的IP地址
  
### 动态IP地址
"动态IP地址"，指计算机开机后，会自动分配到一个IP地址，不用人为设定。它使用的协议叫做DHCP协议。
### DNS协议
DNS协议可以帮助我们将网址转换成IP地址。向DNS服务器地址发送一个DNS数据包 DNS服务器做出响应，告诉我们网址的IP地址







